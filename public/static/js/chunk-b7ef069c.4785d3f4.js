(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b7ef069c"],{6019:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"f-c"},[n("el-alert",{attrs:{title:"首页轮播图管理中心",type:"success",closable:!1}}),n("div",{staticClass:"header w-100 f-r j-e m-tb-10"},[n("el-button",{staticClass:"m-r-20",attrs:{type:"success"},on:{click:function(t){e.dialogPreviewVisible=!0}}},[e._v("预览轮播图")]),n("el-button",{staticClass:"m-r-40",attrs:{type:"primary"},on:{click:e.openDialog}},[e._v("添加轮播图")])],1),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[n("el-table-column",{attrs:{align:"center",label:"banner"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[n("el-image",{staticStyle:{width:"80%",height:"150px"},attrs:{src:t,"preview-src-list":[t]}})]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleTableDelete(t.$index,t.row)}}},[e._v("删除 ")])]}}])})],1),n("el-pagination",{staticClass:"m-t-20",attrs:{background:"","current-page":e.query.page,"page-sizes":[3,6,9,12],"page-size":e.query.size,layout:"sizes, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){return e.$set(e.query,"page",t)},"update:current-page":function(t){return e.$set(e.query,"page",t)},"size-change":e.changeSize,"current-change":e.changePage}}),n("el-dialog",{attrs:{title:"添加轮播图",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"dialogForm",staticStyle:{width:"100%"},attrs:{"label-position":"left","label-width":"100px",model:e.currentRow,rules:e.rule}},[n("div",{staticStyle:{display:"flex","justify-content":"start","flex-direction":"column"}},[n("el-button",{attrs:{loading:e.uploadLoading,type:""}},[n("label",{attrs:{for:"bannerFile"}},[e._v("上传"),n("i",{staticClass:"el-icon-upload el-icon--right"})])]),e.currentRow.avatar?n("el-image",{staticClass:"m-t-20",attrs:{src:e.currentRow.avatar,"preview-src-list":[e.currentRow.avatar]}}):e._e()],1)]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(){e.dialogVisible=!1,e.$refs.dialogForm.resetFields()}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmDialog}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"预览",visible:e.dialogPreviewVisible,width:"900px"},on:{"update:visible":function(t){e.dialogPreviewVisible=t}}},[n("div",{staticClass:"f-r w-100"},[n("el-carousel",{staticStyle:{width:"100%"},attrs:{height:"300px"}},e._l(e.originList,(function(e){return n("el-carousel-item",{key:e},[n("el-image",{attrs:{src:e}})],1)})),1)],1)]),n("input",{attrs:{id:"bannerFile",type:"file",hidden:"hidden"},on:{change:e.upload}}),n("el-dialog",{attrs:{title:"云导入","before-close":e.getList,visible:e.dialogCloudVisible,width:"900px"},on:{"update:visible":function(t){e.dialogCloudVisible=t}}},[n("div",{staticClass:"f-r w-100"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.cloudBannerData,border:""}},[n("el-table-column",{attrs:{align:"center",label:"banner"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[n("el-image",{staticStyle:{width:"60%",height:"100px"},attrs:{src:t,"preview-src-list":[t]}})]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(n){return e.importBanner(t.$index,t.row)}}},[e._v("导入 ")])]}}])})],1)],1)]),n("input",{attrs:{id:"bannerFile",type:"file",hidden:"hidden"},on:{change:e.upload}})],1)},r=[],a=n("c7eb"),s=n("1da1"),c=(n("e9c4"),n("a434"),n("c740"),n("b0c0"),n("d3b7"),n("ca41")),o=n("c08d"),l={name:"BannerPage",data:function(){return{tableData:[],total:0,query:{page:1,size:3,search:""},rule:{name:[{required:!0,trigger:"blur",message:"请填写歌曲名称"}]},isEdit:!1,dialogVisible:!1,currentRow:{},curd:{insert:c["c"],delete:c["c"],update:c["c"],query:c["b"]},originList:[],dialogPreviewVisible:!1,dialogCloudVisible:!1,uploadLoading:!1,cloudBannerData:[]}},computed:{},mounted:function(){this.getCloudBanner(),this.getList()},methods:{getCloudBanner:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){var n,i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["a"])();case 2:n=t.sent,i=n.data,e.cloudBannerData=i;case 5:case"end":return t.stop()}}),t)})))()},getList:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){var n,i;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialogCloudVisible=!1,t.next=3,e.curd.query(e.query);case 3:n=t.sent,i=n.data.data,e.total=i.length,e.originList=JSON.parse(JSON.stringify(i)),e.tableData=i.splice((e.query.page-1)*e.query.size,e.query.size);case 8:case"end":return t.stop()}}),t)})))()},changePage:function(e){this.query.page=e,this.getList()},changeSize:function(e){this.query.size=e,this.getList()},search:function(){this.query.page=1,this.getList()},handleTableEdit:function(e,t){var n=this;return Object(s["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.isEdit=!0,n.currentRow=t,n.dialogVisible=!0;case 3:case"end":return e.stop()}}),e)})))()},handleTableDelete:function(e,t){var n=this;return Object(s["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.$confirm("是否删除该轮播图, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(Object(a["a"])().mark((function e(){var i;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=n.originList.findIndex((function(e){return e===t})),n.originList.splice(i,1),e.next=4,n.curd.delete({type:0,data:n.originList});case 4:return 1===n.tableData.length&&1!==n.query.page&&(n.query.page=n.query.page-1),e.next=7,n.getList();case 7:n.$message({type:"success",message:"删除成功!"});case 8:case"end":return e.stop()}}),e)})))).catch((function(){n.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return e.stop()}}),e)})))()},openDialog:function(){this.currentRow={},this.isEdit=!1,this.dialogVisible=!0},handleClose:function(e){e(),this.$refs.dialogForm.resetFields()},confirmDialog:function(){var e=this;return Object(s["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.dialogForm.validate();case 2:if(!e.isEdit){t.next=7;break}return t.next=5,e.curd.update();case 5:t.next=10;break;case 7:return e.originList.push(e.currentRow.avatar),t.next=10,e.curd.insert({type:0,data:e.originList});case 10:return e.dialogVisible=!1,t.next=13,e.getList();case 13:e.$refs.dialogForm.resetFields();case 14:case"end":return t.stop()}}),t)})))()},upload:function(e){var t=this,n=e.target.files,i=n[0];i&&(o["a"].isImage(i.name)?(this.uploadLoading=!0,this.cos(i).then((function(e){t.currentRow["avatar"]="https://"+e.Location,console.log(t.currentRow),t.$message.success("上传成功")}),(function(e){console.log(e),t.$message.error("网络错误上传失败")})).finally((function(){t.uploadLoading=!1}))):this.$message.error("请上传图片格式文件"))},importBanner:function(e,t){var n=this;return Object(s["a"])(Object(a["a"])().mark((function e(){return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.originList.push(t),e.next=3,n.curd.insert({type:0,data:n.originList});case 3:n.$message.success("导入成功");case 4:case"end":return e.stop()}}),e)})))()}}},u=l,d=n("2877"),f=Object(d["a"])(u,i,r,!1,null,"58d5304c",null);t["default"]=f.exports},"7db0":function(e,t,n){"use strict";var i=n("23e7"),r=n("b727").find,a=n("44d2"),s=n("ae40"),c="find",o=!0,l=s(c);c in[]&&Array(1)[c]((function(){o=!1})),i({target:"Array",proto:!0,forced:o||!l},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a(c)},a434:function(e,t,n){"use strict";var i=n("23e7"),r=n("23cb"),a=n("a691"),s=n("50c4"),c=n("7b0b"),o=n("65f0"),l=n("8418"),u=n("1dde"),d=n("ae40"),f=u("splice"),g=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,b=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f||!g},{splice:function(e,t){var n,i,u,d,f,g,w=c(this),m=s(w.length),y=r(e,m),x=arguments.length;if(0===x?n=i=0:1===x?(n=0,i=m-y):(n=x-2,i=b(p(a(t),0),m-y)),m+n-i>h)throw TypeError(v);for(u=o(w,i),d=0;d<i;d++)f=y+d,f in w&&l(u,d,w[f]);if(u.length=i,n<i){for(d=y;d<m-i;d++)f=d+i,g=d+n,f in w?w[g]=w[f]:delete w[g];for(d=m;d>m-i+n;d--)delete w[d-1]}else if(n>i)for(d=m-i;d>y;d--)f=d+i-1,g=d+n-1,f in w?w[g]=w[f]:delete w[g];for(d=0;d<n;d++)w[d+y]=arguments[d+2];return w.length=m-i+n,u}})},c08d:function(e,t,n){"use strict";n("7db0"),n("d3b7");t["a"]={isImage:function(e){var t=e.split(".").reverse()[0].toLowerCase(),n=!1,i=["png","jpg","jpeg","bmp","gif"];return n=i.find((function(e){return e===t})),n},isLyric:function(e){var t=e.split(".").reverse()[0].toLowerCase(),n=!1,i=["txt","lrc"];return n=i.find((function(e){return e===t})),n},isMusic:function(e){var t=e.split(".").reverse()[0].toLowerCase(),n=!1,i=["mp3","wav","wmv","flac"];return n=i.find((function(e){return e===t})),n}}},c740:function(e,t,n){"use strict";var i=n("23e7"),r=n("b727").findIndex,a=n("44d2"),s=n("ae40"),c="findIndex",o=!0,l=s(c);c in[]&&Array(1)[c]((function(){o=!1})),i({target:"Array",proto:!0,forced:o||!l},{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a(c)},ca41:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s}));var i=n("b775");function r(e){return Object(i["a"])("/activity/queryBanner","get",e)}function a(e){return Object(i["a"])("/activity/getCloudBanner","get",e)}function s(e){return Object(i["a"])("/activity/update","post",e)}}}]);