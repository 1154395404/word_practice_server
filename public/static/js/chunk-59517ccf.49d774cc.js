(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59517ccf"],{c405:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return c}));var r=a("b775");function n(e){return Object(r["a"])("/bookCategory/query","get",e)}function i(e){return Object(r["a"])("/bookCategory/update","post",e)}function s(e){return Object(r["a"])("/bookCategory/delete","post",e)}function c(e){return Object(r["a"])("/bookCategory/insert","post",e)}},d35b:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"f-c"},[a("el-alert",{attrs:{title:"单词书分类管理中心",type:"success",closable:!1}}),a("div",{staticClass:"header w-100 f-r j-e m-tb-10"},[a("el-input",{staticClass:"input-with-select w-30 m-r-20",attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.query.search,callback:function(t){e.$set(e.query,"search",t)},expression:"query.search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1),a("el-button",{staticClass:"m-r-40",attrs:{type:"primary"},on:{click:e.openDialog}},[e._v("添加单词书分类")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"_id",label:"id"}}),a("el-table-column",{attrs:{prop:"name",label:"分类名",width:"180"}}),a("el-table-column",{attrs:{prop:"createDate",label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(e.dayjs(a.createDate).format("YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleTableEdit(t.$index,t.row)}}},[e._v("编辑 ")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleTableDelete(t.$index,t.row)}}},[e._v("删除 ")])]}}])})],1),a("el-pagination",{staticClass:"m-t-20",attrs:{background:"","current-page":e.query.page,"page-sizes":[5,10,15,20],"page-size":e.query.size,layout:"sizes, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){return e.$set(e.query,"page",t)},"update:current-page":function(t){return e.$set(e.query,"page",t)},"size-change":e.changeSize,"current-change":e.changePage}}),a("el-dialog",{attrs:{title:e.isEdit?"编辑":"添加",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"dialogForm",staticStyle:{width:"100%"},attrs:{"label-position":"left","label-width":"100px",model:e.currentRow,rules:e.rule}},[a("el-form-item",{attrs:{label:"分类名称",prop:"name"}},[a("el-input",{model:{value:e.currentRow.name,callback:function(t){e.$set(e.currentRow,"name",t)},expression:"currentRow.name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(){e.dialogVisible=!1,e.$refs.dialogForm.resetFields()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmDialog}},[e._v("确 定")])],1)],1)],1)},n=[],i=a("c7eb"),s=a("1da1"),c=a("c405"),o={name:"CategoryPage",data:function(){return{tableData:[],total:0,query:{page:1,size:5,search:""},rule:{name:[{required:!0,trigger:"blur",message:"请填写分类名称"}]},isEdit:!1,dialogVisible:!1,currentRow:{},curd:{insert:c["b"],delete:c["a"],update:c["d"],query:c["c"]}}},computed:{},mounted:function(){this.getList()},methods:{getList:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){var a,r,n,s;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.curd.query(e.query);case 2:a=t.sent,r=a.data,n=r.list,s=r.count,e.tableData=n,e.total=s;case 8:case"end":return t.stop()}}),t)})))()},changePage:function(e){this.query.page=e,this.getList()},changeSize:function(e){this.query.size=e,this.getList()},search:function(){this.query.page=1,this.getList()},handleTableEdit:function(e,t){var a=this;return Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.isEdit=!0,a.currentRow=t,a.dialogVisible=!0;case 3:case"end":return e.stop()}}),e)})))()},handleTableDelete:function(e,t){var a=this;return Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(Object(i["a"])().mark((function e(){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.curd.delete(t);case 2:return 1===a.tableData.length&&1!==a.query.page&&(a.query.page=a.query.page-1),e.next=5,a.getList();case 5:a.$message({type:"success",message:"删除成功!"});case 6:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})))()},openDialog:function(){this.isEdit=!1,this.dialogVisible=!0,this.currentRow={name:""}},handleClose:function(e){e(),this.$refs.dialogForm.resetFields()},confirmDialog:function(){var e=this;return Object(s["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.dialogForm.validate();case 2:if(!e.isEdit){t.next=7;break}return t.next=5,e.curd.update(e.currentRow);case 5:t.next=9;break;case 7:return t.next=9,e.curd.insert(e.currentRow);case 9:return e.dialogVisible=!1,t.next=12,e.getList();case 12:e.$refs.dialogForm.resetFields();case 13:case"end":return t.stop()}}),t)})))()}}},u=o,l=a("2877"),d=Object(l["a"])(u,r,n,!1,null,"8951f702",null);t["default"]=d.exports}}]);